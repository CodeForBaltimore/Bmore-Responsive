language: node_js
node_js:
- 12
python:
- 3.6
install:
- npm install
- npm install -g codecov
- npm install -g nyc
- pip install mkdocs
services:
- postgresql
- docker
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
- npm run db-create
script:
- npm test
after_script:
- nyc --reporter=text-lcov npm test > coverage.lcov
- codecov
before_deploy:
- mkdocs build --verbose --clean --strict
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  local_dir: site
  target_branch: gh-pages
  on:
    branch: master
notifications:
  slack:
    secure: U4+tEb6IRX5XHNoX/cCBr0jxEbCINpWbhX3D4kHf2YOPEKtdGeZFZh/hqAwXSRRdQIXiEvmrRTD42IEZwWK4HgZ6ZTeLF2C17afg7o0kvxHbVhp+1PS9/BFUx0+5KrYB8Ew4US8f/qq6myCx7gtI9dZImH2m5EpgmTHTumEWkGK5PHJBbwL/0GYsO551eT2QimaBvUvAIe++rB5fK0MveCaT2T1ZmprQTQWLRY2tLXbKyBTpiIgC73lbXWCadO2MbBCx7dFSIJVfFWWa86E7dXBfK1Nk4EClMYaAdnqM+mFLx01NINOrpYuzXt8RQivP9OAitTdDpqwIqJcmn+uE3r48w6Hf9onojZfqbytOMIvybgPlLPOhZGwRFFa9xZWUG4JT6X747t/RcrEQXl8wbbm7QaRKLk60zgLH0ysvUFLr6cl+CCzZqTmRbWgGh5NiNS1U6XrjiQR4GVZkKPwLjx9+1ZgaayPkzaFReOETgc72X1WJClkm108R2lLfqvn9iF4C19EmuQpLehzXFXIDN5kHHvKFhbG4jiZwYwMQH0R1OqYhrwB3QWO1Scco6Z7zUcrN9S0KDu4p46sUoLsrk6+DP8VbHDMpiPt0wPOJnvzSeoqYgSYYMuCITr/VMvz6VS7E65swNHMJEWsz+SDsLUnamhUHanMPJzGrk7zmnBY=
env:
  global:
  - NODE_ENV=test
  - secure: pG4ZWAp2dSds5RXlH5wT38GIqwT/px7ubgpgioJzFqy8Q9trkxDyEk3hlGeEPASpfdNGRveA5w5JbGedWCQhIDs2SIDcQA/dh8WnDtiGz+RTlAuUUvsy91WyjEsmaPc2D/YFRMSXiUi3QDUXUSXt2SUtBl8hSuzcnnZMy6BtU+edPqR6hO53c23roE8V6h14O+YoUkbfdyRQBMi5G/WFZxLCpWVsiVP7X0IjOES/E+RFU4vAddT/Q3HaX+RJwqWReItCyluMsJhbfYSLI8m1QbZ38hseJgF3SIqPrWMCOsPdh0AlugTMKbWIIsJi1ba4LzmFjrh5so4F0OdhGhKItlCQ2bOlSIF5sd4kAni1BIX8u2MIIaghM0TM7r4owFj5u1a5AbRkLHVu2J7p7SlHM2WYjlbcqnyuwJYcahGJnFI1K8SpeV5p90Cp3ovtN+f9913cZhQWSL1kshYsFhJD4yfO1eD2ljplC3ufblHi7YXaSgQQNNwo3Y/B6x2AKTGqIOy0LQaidvIWI/9ZRBWoQheFJMA4ZBEYidR3D2AwR4G467NYxrLbdf/1iyMDmWR/yOQtBHAYZ/TyxAjJgyLrofse6XoznW8oN5ky30GqonI/3nID6LOHCQppk18idPpfmlAzMh0KjdD6U/4SJOsc+k/Z3aF0MwTwHdDSYPuwefM=
  - secure: c2PQ9Lkzj7nb7jfmp8vzWhgxh0ALMD9o8ylcAsIBwKZFA60Y6cGzBPdTLhjb7UlBXg9JjDtUMZMZZJBCwoh13nkszE4DV2/u9EPDrt7/2CTLHY8m23TwxbVhcqjNypE4FXRbmmq6MQBeFmN67PeNfgJtzAOHt5+W7XA68CfpYnyEoLm3Qsm3tkNE9PQ2JCnLBqrAhIF3lyQq1odwjT7ls00wgaTN/V59XanbXQFO5NmpWD33wmq02E9AqsH4WGcbyx4vFyby1ubr0EWgV1UQRUh6R4+KQ6E6LiX6LYCZQhY1f2CiBaueZ1l1nMSF3plbrgp9ya46bXlL7bRSJIiecdw4wkYpz/idX4JuJ6S+fFK27mfq7mGkyjXeN5l/69CQTxqBp2UWnLZCkkS8qypPNUl/87zKWzSbMKnSKdQVQje9MADonkAVfX8ZmJlwRReLZVdt6bnEG1RaJN+dLOycyJETRPuB5yFCghKvoUbLbDFthVJAWRha5ABhRwiAt9+zMU1L+/vlYh8EZ9z+olQsoJxOm0mT7uEky44qH0BN4WXAKj15QvYabxCoMuU/wtLtw+ZKIBApyCS61JG3u3t/Qw/6AaAusoUD8zD8OI4NNoSpO4Z9YT/zccgYA3/f6lJ4W6FnlgnC+IWIKkT2OFnrrmyYgo72457PL/Uh2MZDT1c=
  - secure: eQnq82AcC1mRBjkTSAo75qgmbH4f0Ij2uVqyT3gspRouxGsr7kd3miooK3xGiVO80wLQbwSESamcG/q28UrI0sbh2QBfgcsxN/KVH7IB2VmSaPelj1k57ldnNHYZso0i979K0D8qbWFjFiO25ZSmkATw4zEsnOx9t2UglXqU5ffTjS45nDbN1/BqI+1GXLdxtNa583m1P5iQcdfwYTSfmRq95PS/s4SSpCKciSK5lL+SThwZDcmXKWTTFdk35IfPCq4NnEY+1YXjRxFLUT9Ua52e3yp59Akfgp2s0IUMDq0KtSIpGVhfCi+9l5kyT5O4zR3K2QeHK08Tr7wGTfnykVAPRJ7KQL+knWEXQlGMk6F4E2Z+U5nqDaPMTpjE7pk+Ie2/Om6TU1Po+Zr6kgrDchre/Xx/tjjSNSYv5ROrjIUsNa2S6BTK1/w+Bbm+7ZU9717g5Ovo+eFoxxF84itFIiHpM1bN3Is1A7hVFXdKdOQc6+WBTL/v3LBqK9hzIhZPHpLFsTfUKAuTMNoEPYlZXNQnRpJ4n/Em9x90D+0aLkD1MJhtPO2zVPxtPRIt6iy3kZZmRZvXOLEYcAUqSOWWQmXeYMevyDwXqdRkCUVGJr51oy1AkniZZlSZ0+REGLndIFtDAvH299Jd4kSse/lJjN3m2Wz1mmeOmnOpv2sDwk0=
  - secure: BEyLQl+KyvtEQer83TN0c/sf0ywGpoj2dcokuaVvd5y1Vdy0pEqdUEwdeFK9Z5FTVGpgxlRF5nLsuUo7rpbpkv8Roxtaph6+oThBpX/XOK+IJY0bVifgvKIthV/5I9o+zpQzjNcmTXtQ+fVkoa+IYC87GCK/RR26VhmXy5rXfHzRkhCLOgbJcGZI9r62hmtGMkEM2/+fDK0RfzFFAMQ4VeejCV8ZrecHkvKLFt9jyW3ftLZtTkWRWGt2F2oU/SqGJlhmGbaqlAIi/CSc1nfc2r3AtRWLVTeCIwclF0uE0wwikW12DDvtnfxi3nr67wPGVaMvjW+tsAP3ycuzvXDfOOsjNj2bChUSwrmPv6+xMkWXYC+xItOB04tyGdN7vY2YwXTcovceE2YXJLFqH+enC3wTCVN0k2ap7hdM4nXvEgzWgFprG8KFjL32tTmricO1/sDEs/HNbAIUGFihXd1vj2AGcZ9iqO5gkLt8PAvkXUtePj+Zp8qeJhrOpWqMJZUshZIC0uM35HNiUcPol+6Ao0maNowPyQBjg0vUwvfGjqtW+ZYC0uosyz3gBDLUG8AO03UnsErCLLbwXiU/itg7wpe5zDW+FlBcN1vLtUaVYdkzKsAs7VDKYx9G11oNOLIyi56rGSDutf6paF8QpqYI/npm11gwRt4OjfZVXfWuEDE=
  - secure: HeFxAuFFBHd9QxUwSRB7hylCcC+Y2W0DrIjAzGPl2D8bnrpFMirDnTZy4eW0wCZTCRdADojSNeUEJ1+G/YSJPu+bG/0iMsExiOJSJyqc4OH6vIjg7g6FLcpCoiPGvrOX1pfhdu5e43yeHZjFsE2kcJwIOJ+6TVtF9Lf+qu9FyeWZDc7W5WFtuK1IsmZTgdUxHlZbW7tfLnaY+ei0TJwacRAbI3bbc8yID2aYoipFCn94WnxUvCS7oUilGxiyYm8FG8mwS+YI3mUlgh7r0WDNiys+ctz5UkH9FQorELP6OQfgV5xCUe9vOIKcuzb8wpKeeYpqeY85PBn9Fde9jiVN392+ZU17vbnxFvWN67El1FR8953erx+t9ESI0mIVlhPn8hAI7GJeEeJXougVmVaFEDim577YUUpXM3VulcHZkGqvpl6QfP5/6WfSxociqn7fWQY/kV8D4CovCRFGH3S+D2pmKm56/TP5suD2xOcRTMz7T3LMitNcgAGBDABVNggV14skl/j2TPiCWrBk4YP9JecXJc2QNz+RvivSKhzsiVWPpx3yLRrM1weIaKUrmrHR6xs+5oHdVapBayVAB2oS3OnckK15JjWYj7dTYaNPmienqUGHu+xMr7Yy8b4nlZxpa1ISVU9BPXPp0zwA0F8FLfdnlvXnVswRiu17ea6h9fw=
  - secure: kY+V5tl5np5mTVA71uVrrt7LHctwc5aBvXVfamWixKVZEXdk2ARqPvPevBKvIXKQpzwiHlXMT5c/wSwf+6q1R25iRyCdrjDXMWXWf1KtwuQIeuhBYyCWf3wumKjMYoxRHv5wxGAHASw73X3zALqpWCLW+d7XomMcQ4VluQYL75Ui9wLuKIJAzUgMV73JYvObovedTZd6ewJ6HcojsCCumn6PiBJrupph+xk3guEuI0g9tJapvpY/biIuSqPmRsQ/LV96J+KFsIXj5la5BKobWaT83EOPa/gAsGmvDrJgRuFwABGNWLgTQXOSN3ZKvb113daggrS2qbNHdFlq28V7VI0LayE+3A7yWVfkVD31vl+ouXkzTc3PMGd2aWq3ym6IOadHu7lqUX+y4ZRNm6df/GapCsWqM1R9qnSEhEdD0nNnc7IPvtF7HYcZhZZvzMUa9kpJRhZyxzp0hll+IQHAiHiRX1uld8kD49BNMjZkZgI9FEek/e/yEaPM1KWW+gJshn+3OZRMQHDI+3AQWR/jRdPLp/M092zCeMX603DnabAtVC5mhR8T/KpdjfOKIYRoE7KBpbzTSTKcdMCMGM173gHllw76hjpcpKf7BkDZ1L8SKUiXzfV8CnFMSHdkQuwLW853iyQ0gaUiqv/i+5n/vxC4JZQytg78KwDIXe1qGTU=
  - secure: gqU6D5dxV0zNtKX+oj/KOQjtAWU40Nd7bHh8hmsnPgOgAa9oMARrpCnmWeOmm0xZRDFtlJiXeJDCJsYMgfLEjYYzFUw6P2gJhvk/BFG5vLm8IHYmSC/7Xo6OyhwKKUjoNyhYJ1FS3M+aZSLwedK6C5lBuXunGgX2GJrAyVIttPLebxA9re0k7vD8sao8RyN9VY0skFT8BIHhjQ9bYeNFeH5dAVQ1aFbKPRY1kttNnKU4NsXYXOtkIwp8lfZ26WOSyafjOMdI18zUY9JPgHRgcxj4TXNywVqRgSYFAEzNY18YVObvMoiJFA+7i+M9rFwWa9y+WeK2N927xCV1f5PQd1GXCKPWQLKeTobBuoK2z094zuIy1uc6cFPQ1IDvWAdYmhqiYs/f3dZvfei89CVRJ6uqqkfFPoiNL0Irv7hez57BQUa8Hs3eJ+0/wlUOE4KGlX18ucbF8jtz/9hLcq1SgqKzBJf+1W+xCTBWFaREHqnj5MIm4Xes0MM6s5U3RbAUxVrn2nvxajEdNAeJiSI9RWOZavA+J9GrVxes83EuShJF62irtsk1COISmqnjjC63+rWAFoIYaq5E80HKEnICVkQOW2NZNUc0t7/+6UJCS0gCeh1IRNy3054bHkZH/9+CM8YBWhEzCsXZFJrEMBeS+j+o+De2V40td2a5K1FVyRU=
  - secure: tPlFv25jvEudIDR80SaT69CyLgGxMBD1ll7Iq/aO3z1suhzZaR4w0K5BKoJDddyLKAVo2gEFLxw2fnKb+E4Saf9vVpVp4ELJvLWkdHqihwFD4PtNdX0tGSKOZl0KbEAOZND8Jl95jC2WMY5mD4QNv2RvwsWrvfbuxCXZFxr3MZJHpWx/9lDY+Px2HS9QkzTS1HzRkhbk6izKF1Id7xXFZcyTHsqWzDIVsGnSRiQDZh+AZYfzsCkP3HVLpHk9vzjhmLWr1CYG052SpknVa/hfMYWbKsGN4PnUMoxrXxvuXOk7tl8LRzCQBquAeb0muhdb+XmkS537jSqh0AwsbC7269L57AbjL+4hBF7uSyMzaJcUoKdPpo1bHyUoxYNQ+7c5gKzeDPe0Kqi30taHe4dols7ykl/h8/4lzzU3re7lJm8H7oG56y3+Gvyxm2QAS+o85yoOg7dImoOqVbgD4j73DpVA/UsIGG+7dIcXsEnzZnWb62nyqMQufpi5+ztz01nlSJU9x2x3h75ZfhjE6/s+NU+QohVpT0i6tN+J8uqHELXVI+T9EEYw7WfxAXLDwqSplXIr5SuQzCkam4nYemVzXdt3D1Suer0hLRi+C7N8N0sZ8JA+tbRwprXyzO1Itt0dOhh6jYDYp8lkyZn86WjgnJynWEguo2V+g41tuIO/RZA=
